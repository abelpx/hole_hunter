# HoleHunter é¡¹ç›®è§„åˆ™

æœ¬è§„åˆ™æ•´åˆäº†é¡¹ç›®ç‰¹å®šè§„åˆ™å’Œå…¨å±€æœ€ä½³å®è·µã€‚

## 1. Git Commit Message è§„èŒƒ

### æ ¼å¼è¦æ±‚

```
<type>: <subject>

<body>
```

### Type ç±»å‹ï¼ˆå¿…é¡»ä½¿ç”¨ï¼‰

- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤ bug
- `docs`: æ–‡æ¡£å˜æ›´
- `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰
- `refactor`: é‡æ„ï¼ˆæ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugçš„ä»£ç å˜åŠ¨ï¼‰
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
- `revert`: å›æ»š
- `build`: å½±å“æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–çš„æ›´æ”¹
- `ci`: CIé…ç½®æ–‡ä»¶å’Œè„šæœ¬çš„æ›´æ”¹

### Subject è¦æ±‚

- **å¿…é¡»ä½¿ç”¨ä¸­æ–‡**
- ä¸è¶…è¿‡ 72 ä¸ªå­—ç¬¦
- ä¸ä»¥å¥å·ç»“å°¾
- é¦–å­—æ¯å°å†™
- ç®€æ´æè¿°åšäº†ä»€ä¹ˆ

### Body è¦æ±‚

- **å¿…é¡»ä½¿ç”¨ä¸­æ–‡**
- æ¯è¡Œä¸è¶…è¿‡ 100 ä¸ªå­—ç¬¦
- è¯´æ˜å…³é”®å˜æ›´ç‚¹
- ä½¿ç”¨åˆ—è¡¨å½¢å¼æ›´æ¸…æ™°

### ç¦æ­¢äº‹é¡¹

- âŒ ç¦æ­¢åŒ…å«ä»»ä½•è‡ªåŠ¨ç”Ÿæˆç­¾åï¼ˆå¦‚ `ğŸ¤– Generated with`ï¼‰
- âŒ ç¦æ­¢åŒ…å« `Co-Authored-By: Claude` ç­‰ç±»ä¼¼ç­¾å
- âŒ ç¦æ­¢ä½¿ç”¨å¤§å†™å­—æ¯å¼€å¤´çš„ Subject
- âŒ ç¦æ­¢ Subject ä»¥å¥å·ç»“å°¾

### ç¤ºä¾‹

**å¥½çš„ç¤ºä¾‹ï¼š**
```
feat: æ¡Œé¢ç‰ˆå®ç° Unix Socket é€šä¿¡

ä¸»è¦å˜æ›´ï¼š
- æ¡Œé¢ç‰ˆä½¿ç”¨ Unix Socket æ›¿ä»£ TCP ç«¯å£
- Go åç«¯æ”¯æŒ --socket å‘½ä»¤è¡Œå‚æ•°
- å®ç°åç«¯å¥åº·æ£€æŸ¥ä¸é‡è¯•æœºåˆ¶

æ¡Œé¢ç‰ˆç°åœ¨ä½¿ç”¨ Unix Socket è€Œä¸æ˜¯å ç”¨ TCP ç«¯å£ã€‚
```

**ä¸å¥½çš„ç¤ºä¾‹ï¼š**
```
âŒ æ›´æ–°é…ç½®æ–‡ä»¶
âŒ Feat: æ·»åŠ æ–°åŠŸèƒ½
âŒ fix: ä¿®å¤bug.
âŒ chore: æ¸…ç†æ–‡ä»¶

ğŸ¤– Generated with [Claude Code]
Co-Authored-By: Claude <noreply@anthropic.com>
```

## 2. ä»£ç é£æ ¼è¦æ±‚

### 2.1 é¿å…è¿‡åº¦"AI é£æ ¼"çš„ä»£ç 

**ç¦æ­¢çš„ AI é£æ ¼ç‰¹å¾ï¼š**

1. **å†—ä½™çš„æ³¨é‡Š**
```typescript
// âŒ è¿‡åº¦æ³¨é‡Š
// å®šä¹‰ä¸€ä¸ªåä¸º getUser çš„å¼‚æ­¥å‡½æ•°
// æ¥æ”¶ä¸€ä¸ª userId å‚æ•°ï¼Œç±»å‹ä¸º string
// è¿”å›ä¸€ä¸ª Promiseï¼ŒåŒ…å« User ç±»å‹çš„æ•°æ®
async function getUser(userId: string): Promise<User> {
  // ä»æ•°æ®åº“è·å–ç”¨æˆ·
  return await db.users.findById(userId);
}
```

```typescript
// âœ… ç®€æ´å®ç”¨
async function getUser(userId: string): Promise<User> {
  return await db.users.findById(userId);
}
```

2. **ä¸å¿…è¦çš„å‡½æ•°æ‹†åˆ†**
```typescript
// âŒ è¿‡åº¦æ‹†åˆ†
function validateEmail(email: string): boolean { /* ... */ }
function sanitizeEmail(email: string): string { /* ... */ }
function checkEmailDuplication(email: string): boolean { /* ... */ }
function saveEmail(email: string): Promise<void> { /* ... */ }

// âœ… ç›´æ¥å®ç°
async function registerEmail(email: string): Promise<void> {
  if (!isValidEmail(email)) throw new Error('Invalid email');
  await ensureEmailUnique(email);
  await db.emails.create({ email });
}
```

3. **è¿‡åº¦è®¾è®¡**
```typescript
// âŒ è¿‡åº¦æŠ½è±¡
interface IUserProvider {
  getUser(id: string): Promise<IUserDTO>;
}

interface IUserRepository {
  find(id: string): Promise<IUserEntity>;
}

class UserMapper {
  static toDTO(entity: IUserEntity): IUserDTO { /* ... */ }
}

// âœ… ç®€å•ç›´æ¥
async function getUser(id: string): Promise<User> {
  return await db.users.findById(id);
}
```

### 2.2 å¥½çš„ä»£ç é£æ ¼

1. **ç®€å•ç›´æ¥**
```typescript
// âœ… ä¼˜å…ˆä½¿ç”¨ç®€å•çš„æ–¹æ³•
function isValidUrl(url: string): boolean {
  try {
    new URL(url);
    return true;
  } catch {
    return false;
  }
}
```

2. **å®ç”¨çš„æ³¨é‡Š**
```typescript
// âœ… æ³¨é‡Šè§£é‡Š"ä¸ºä»€ä¹ˆ"ï¼Œè€Œä¸æ˜¯"æ˜¯ä»€ä¹ˆ"
// ä½¿ç”¨ Unix Socket è€Œä¸æ˜¯ TCPï¼Œé¿å…ç«¯å£å†²çª
const socket = path.join(os.homedir(), '.holehunter/server.sock');
```

3. **åˆç†çš„æ•°æ®ç»“æ„**
```typescript
// âœ… ä¼˜å…ˆé€‰æ‹©æ­£ç¡®çš„æ•°æ®ç»“æ„
const targetsByStatus = groupBy(targets, 'status');
```

## 3. æ–‡ä»¶åˆ›å»ºè§„åˆ™

### 3.1 ç¦æ­¢åˆ›å»ºçš„æ–‡ä»¶ç±»å‹

- âŒ `diagnose_*.py` / `diagnose_*.sh` - ä½¿ç”¨ç°æœ‰å·¥å…·æˆ–æ·»åŠ å‚æ•°
- âŒ `debug_*.py` / `debug_*.sh` - ä½¿ç”¨ print/logging
- âŒ `check_*.py` / `check_*.sh` - åˆå¹¶åˆ°æµ‹è¯•è„šæœ¬
- âŒ `test_*_fix.*` / `*_fixed.*` - ç›´æ¥ä¿®å¤åŸæ–‡ä»¶
- âŒ `*_SUMMARY.md` / `*_FIX*.md` - ç»ˆç«¯è¾“å‡º
- âŒ `*_REPORT.md` (éæœ€ç»ˆç‰ˆ) - è¦†ç›–ç°æœ‰æŠ¥å‘Š
- âŒ `*_old.*` / `*.bak` / `*.backup` - ä½¿ç”¨ git ç®¡ç†

### 3.2 å…è®¸åˆ›å»ºçš„æ–‡ä»¶ç±»å‹

- âœ… `tests/test_*.*` - å•å…ƒæµ‹è¯•
- âœ… `src/*_utils.*` - å·¥å…·æ¨¡å—
- âœ… `config/*.yaml` - é…ç½®æ–‡ä»¶
- âœ… `scripts/*` - å¿…è¦çš„æ„å»º/éƒ¨ç½²è„šæœ¬

### 3.3 åˆ›å»ºå‰æ£€æŸ¥

1. æ˜¯å¦æœ‰ç±»ä¼¼æ–‡ä»¶?
2. èƒ½å¦ä¿®æ”¹ç°æœ‰æ–‡ä»¶å®ç°?
3. èƒ½å¦ç”¨å‚æ•°/é…ç½®å®ç°?

## 4. æŠ€æœ¯æ¶æ„è¦æ±‚

### 4.1 åå¥½çš„æ¨¡å¼

- å•ä½“æ¶æ„ä¼˜äºå¾®æœåŠ¡ï¼ˆé™¤éçœŸæ­£éœ€è¦åˆ†å¸ƒå¼ï¼‰
- ç®€å•çš„æ•°æ®ç»“æ„
- ç›´æ¥çš„æ§åˆ¶æµ
- ç»„åˆä¼˜äºç»§æ‰¿

### 4.2 é¿å…çš„æ¨¡å¼

- è¿‡åº¦æŠ½è±¡
- ä¸å¿…è¦çš„è®¾è®¡æ¨¡å¼
- ç†è®ºå®Œç¾ä½†å®é™…å¤æ‚çš„æ–¹æ¡ˆ
- è¿‡æ—©ä¼˜åŒ–

### 4.3 å‡½æ•°è®¾è®¡

- å•ä¸€èŒè´£ï¼šä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹
- é•¿åº¦é™åˆ¶ï¼šä¸è¶…è¿‡ 50 è¡Œ
- å‚æ•°é™åˆ¶ï¼šä¸è¶…è¿‡ 4 ä¸ªå‚æ•°
- ä¼˜å…ˆè¿”å›æ•°æ®ï¼Œé¿å…è¿”å›çŠ¶æ€ç 

## 5. æ€§èƒ½ä¸è´¨é‡è¦æ±‚

### 5.1 æ€§èƒ½åŸºå‡†

- P50 < 200ms
- P90 < 500ms
- P95 < 1000ms
- P99 < 2000ms
- è¶…æ—¶é˜ˆå€¼: 120ç§’

### 5.2 å¹¶å‘æ§åˆ¶

- å•è¿›ç¨‹å¹¶å‘ <= ulimit -n * 0.8
- è¿æ¥æ± å¤§å° = å¹¶å‘æ•° * 10
- çº¿ç¨‹æ± å¤§å° = CPUæ ¸å¿ƒæ•° * 2

### 5.3 èµ„æºé™åˆ¶

- å†…å­˜: å•è¿›ç¨‹ < 2GB
- CPU: å•è¿›ç¨‹ < 80%
- æ–‡ä»¶å¥æŸ„: å•è¿›ç¨‹ < ulimit -n * 0.9

## 6. å®‰å…¨è§„èŒƒ

- æ‰€æœ‰å¤–éƒ¨è¾“å…¥å¿…é¡»éªŒè¯
- è®¤è¯æˆæƒå¿…é¡»ä¸¥æ ¼
- æ•æ„Ÿä¿¡æ¯ä¸èƒ½ç¡¬ç¼–ç 
- å®‰å…¨äº‹ä»¶å¿…é¡»è®°å½•
- ç¦æ­¢ XSSã€SQL æ³¨å…¥ç­‰å¸¸è§æ¼æ´

## 7. é”™è¯¯å¤„ç†è§„èŒƒ

### 7.1 å¼‚å¸¸å¤„ç†

- æ•è·å…·ä½“å¼‚å¸¸ï¼ˆrequests.Timeout, ConnectionErrorï¼‰
- é‡è¯•ç­–ç•¥ï¼šæŒ‡æ•°é€€é¿ï¼Œæœ€å¤š 3 æ¬¡
- å¤±è´¥å›æ»šï¼šäº‹åŠ¡æ€§æ“ä½œå¿…é¡»å›æ»š
- ä¸è¦åæ‰å¼‚å¸¸ï¼Œè®°å½•åå‘ä¸ŠæŠ›

### 7.2 é”™è¯¯åˆ†ç±»

**å¯é‡è¯•é”™è¯¯ï¼š**
- è¿æ¥è¶…æ—¶
- ç½‘ç»œæŠ–åŠ¨
- æœåŠ¡ç«¯ 503

**ä¸å¯é‡è¯•ï¼š**
- è®¤è¯å¤±è´¥ (401/403)
- å‚æ•°é”™è¯¯ (400)
- èµ„æºä¸å­˜åœ¨ (404)

## 8. Git å·¥ä½œæµ

### 8.1 åˆ†æ”¯ç­–ç•¥

- `master`: ä¸»åˆ†æ”¯ï¼Œä¿æŒç¨³å®š
- `feature/*`: åŠŸèƒ½å¼€å‘
- `fix/*`: bug ä¿®å¤
- `refactor/*`: é‡æ„

### 8.2 æäº¤å‰æ£€æŸ¥

- [ ] ä»£ç é€šè¿‡ lint æ£€æŸ¥
- [ ] commit message ç¬¦åˆè§„èŒƒ
- [ ] ä¸åŒ…å«æ•æ„Ÿä¿¡æ¯
- [ ] ä¸åŒ…å«è°ƒè¯•ä»£ç 
- [ ] å¤§æ–‡ä»¶å·²ä½¿ç”¨ Git LFS

### 8.3 ä»£ç å®¡æŸ¥æ ‡å‡†

1. æ•°æ®ç»“æ„è®¾è®¡
2. å¤æ‚åº¦æ§åˆ¶
3. ç‰¹æ®Šæƒ…å†µå¤„ç†
4. è¾¹ç•Œæ¡ä»¶
5. å®‰å…¨é—®é¢˜

## 9. é¡¹ç›®ç‰¹å®šè§„åˆ™

### 9.1 ç›®å½•ç»“æ„

```
hole_hunter/
â”œâ”€â”€ backend/          # Go åç«¯
â”œâ”€â”€ frontend/         # React å‰ç«¯
â”œâ”€â”€ main/            # Electron ä¸»è¿›ç¨‹
â”œâ”€â”€ build/           # æ„å»ºè„šæœ¬å’Œé…ç½®
â”œâ”€â”€ shared/          # å…±äº«ç±»å‹å’Œå·¥å…·
â”œâ”€â”€ docs/            # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ tests/           # æµ‹è¯•æ–‡ä»¶
```

### 9.2 æ„å»ºè§„åˆ™

- å‰ç«¯æ„å»ºäº§ç‰©ï¼š`frontend/dist/` (è¢« .gitignore å¿½ç•¥)
- åç«¯æ„å»ºäº§ç‰©ï¼š`build/binaries/` (è¢« .gitignore å¿½ç•¥)
- æœ€ç»ˆå‘å¸ƒåŒ…ï¼š`releases/` (è¢« .gitignore å¿½ç•¥)
- æ‰“åŒ…è°ƒè¯•æ–‡ä»¶ï¼š`artifacts/` (è¢« .gitignore å¿½ç•¥)

### 9.3 ä¾èµ–ç®¡ç†

- Go: ä½¿ç”¨ go.mod
- Node.js: ä½¿ç”¨ package.json
- å®šæœŸæ›´æ–°ä¾èµ–ï¼Œä¿®å¤å®‰å…¨æ¼æ´
- é”å®šé‡è¦ä¾èµ–ç‰ˆæœ¬

## 10. è¾“å‡ºè¦æ±‚

- åˆ†æç»“æœ: ç»ˆç«¯è¾“å‡º
- è°ƒè¯•ä¿¡æ¯: logging æ¨¡å—
- å˜æ›´è®°å½•: git commit
- API æ–‡æ¡£: docstring
- ä¸ç”Ÿæˆå†—ä½™çš„æ–‡æ¡£æ–‡ä»¶

## 11. å¸¸ç”¨å‘½ä»¤

### å¼€å‘
```bash
make dev              # å¯åŠ¨å¼€å‘æ¨¡å¼
make dev-server       # å¯åŠ¨æœåŠ¡ç‰ˆ
make lint             # ä»£ç æ£€æŸ¥
```

### æ„å»º
```bash
make build-desktop    # æ„å»ºæ¡Œé¢ç‰ˆ
make build-server     # æ„å»ºæœåŠ¡ç‰ˆ
make cross-compile    # è·¨å¹³å°ç¼–è¯‘
```

### æ‰“åŒ…
```bash
make package-mac      # æ‰“åŒ… macOS ç‰ˆæœ¬
make package-win      # æ‰“åŒ… Windows ç‰ˆæœ¬
make package-linux    # æ‰“åŒ… Linux ç‰ˆæœ¬
```

### æ¸…ç†
```bash
make clean            # æ¸…ç†æ„å»ºäº§ç‰©
make clean-all        # æ¸…ç†æ‰€æœ‰ç¼“å­˜
```

---

**æ ¸å¿ƒç†å¿µï¼šç®€å•ã€å®ç”¨ã€ç›´æ¥**
